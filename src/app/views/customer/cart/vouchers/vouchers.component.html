<!-- Popup overlay -->
<div
  class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 z-3 d-flex justify-content-center align-items-center"
>
  <!-- Popup container -->
  <div
    class="bg-white rounded shadow-lg p-4 w-100"
    style="max-width: 900px; max-height: 90vh; overflow-y: auto"
  >
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="mb-0">Danh sách Voucher</h4>
      <button class="btn-close" (click)="onClosePopup()"></button>
    </div>

    <!-- Danh sách voucher -->
    @for (voucher of vouchers; track voucher.id) {
    <div class="mb-3">
      <div
        class="card voucher-card h-100 d-flex flex-row justify-content-between align-items-center"
      >
        <div class="card-body p-4 d-flex flex-column">
          <div class="d-flex align-items-start mb-3">
            <h5 class="voucher-title mb-0">{{ voucher.title }}</h5>
            @if (getNgayConLai(voucher.id) < 10) {
            <span class="badge badge-expiring ms-2">Sắp hết hạn</span>
            } @else {
            <span class="badge badge-new ms-2">Mới</span>
            }
          </div>

          <p class="voucher-description mb-3">
            {{ voucher.description }}
          </p>

          <div class="mt-auto d-flex align-items-center mb-1">
            <i class="fas fa-calendar-alt text-muted me-2"></i>
            <span class="voucher-expiry"
              >Hạn sử dụng: {{ voucher.expiry }}</span
            >
          </div>
        </div>
        <div class="pe-4">
          <button class="btn btn-primary" (click)="useVoucher(voucher.id)">
            Sử dụng
          </button>
        </div>
      </div>
    </div>
    }

    <!-- Footer -->
    <div class="text-end pt-3 border-top">
      <button
        type="button"
        class="btn btn-outline-primary px-3"
        (click)="onClosePopup()"
      >
        Đóng
      </button>
    </div>
  </div>
</div>
